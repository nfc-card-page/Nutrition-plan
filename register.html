<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ثبت و ارسال اطلاعات</title>
<style>
/* تمام CSS قبلی بدون تغییر */
</style>
</head>
<body>
<div class="container">
    <a href="index.html" class="back-btn">← بازگشت به صفحه اصلی</a>
    <h1>ثبت و ارسال اطلاعات</h1>

    <div class="success-message" id="successMessage">
        اطلاعات شما با موفقیت ثبت شد!
    </div>

    <form id="userForm">
        <div class="form-group">
            <label for="username">نام کاربری:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="password">رمز ۴ رقمی:</label>
            <input type="password" id="password" name="password" maxlength="4" pattern="[0-9]{4}" required>
        </div>
        <div class="form-group">
            <label for="age">سن:</label>
            <input type="number" id="age" name="age" min="1" max="120" required>
        </div>
        <div class="form-group">
            <label for="gender">جنسیت:</label>
            <select id="gender" name="gender" required>
                <option value="">انتخاب کنید</option>
                <option value="male">مرد</option>
                <option value="female">زن</option>
            </select>
        </div>
        <div class="form-group">
            <label for="height">قد (سانتی متر):</label>
            <input type="number" id="height" name="height" min="100" max="250" required>
        </div>
        <div class="form-group">
            <label for="weight">وزن (کیلوگرم):</label>
            <input type="number" id="weight" name="weight" min="20" max="300" step="0.1" required>
        </div>

        <button type="submit" class="btn btn-primary">ارسال اطلاعات</button>
    </form>
</div>

<script>
const WORKER_URL = 'https://user-data-api.clad90093.workers.dev';

document.getElementById('userForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const formData = new FormData(this);
    const userData = {
        username: formData.get('username'),
        password: formData.get('password'),
        age: formData.get('age'),
        gender: formData.get('gender'),
        height: formData.get('height'),
        weight: formData.get('weight'),
        timestamp: new Date().toISOString()
    };

    try {
        const res = await fetch(`${WORKER_URL}/add`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(userData)
        });

        if (res.ok) {
            document.getElementById('successMessage').style.display = 'block';
            this.reset();
            setTimeout(() => document.getElementById('successMessage').style.display = 'none', 3000);
        } else {
            alert('خطا در ثبت اطلاعات');
        }
    } catch (err) {
        console.error(err);
        alert('خطا در ارتباط با سرور');
    }
});
</script>
</body>
</html>

